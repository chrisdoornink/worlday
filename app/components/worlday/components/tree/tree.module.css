.tree {
  position: absolute;
  width: calc(8px * var(--scale-factor));
  transform-origin: bottom center;
  animation: treeSway 4s ease-in-out infinite;
  animation-delay: calc(var(--random-delay) * -1s);
  pointer-events: none;
}

.trunk {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  height: 100%;
  background: #1a1a1a;
  box-shadow: 
    inset -1px 0 2px rgba(255, 255, 255, 0.1),
    inset 1px 0 2px rgba(0, 0, 0, 0.3);
  border-radius: 0;
  transform-origin: bottom center;
  backdrop-filter: blur(0.5px);
  opacity: 0.9;
}

.trunk::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      rgba(0, 255, 255, 0.03) 2px,
      rgba(0, 255, 255, 0.03) 4px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 2px,
      rgba(255, 0, 255, 0.03) 2px,
      rgba(255, 0, 255, 0.03) 4px
    );
  filter: blur(0.5px);
  animation: textureShift 8s linear infinite;
}

.branch {
  position: absolute;
  bottom: var(--branch-height);
  left: 50%;
  width: calc(8px * var(--scale-factor) * var(--branch-thickness) / 100);
  height: calc(var(--branch-length) * 1%);
  background: #1a1a1a;
  transform-origin: bottom center;
  transform: translateX(-50%) rotate(var(--branch-angle));
  border-radius: 0;
  animation: branchSway 3s ease-in-out infinite;
  animation-delay: calc((var(--random-delay) + var(--branch-height) * 0.0002) * -1s);
  box-shadow: 
    inset -1px 0 2px rgba(255, 255, 255, 0.1),
    inset 1px 0 2px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(0.5px);
  opacity: 0.9;
}

.branch::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      rgba(0, 255, 255, 0.03) 2px,
      rgba(0, 255, 255, 0.03) 4px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 2px,
      rgba(255, 0, 255, 0.03) 2px,
      rgba(255, 0, 255, 0.03) 4px
    );
  filter: blur(0.5px);
  animation: textureShift 8s linear infinite;
}

@keyframes textureShift {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 50px 50px;
  }
}

/* Tree swaying animation */
@keyframes treeSway {
  0%, 100% {
    transform: rotate(calc(var(--wind-direction) * -1deg * var(--wind-intensity)));
  }
  50% {
    transform: rotate(calc(var(--wind-direction) * 2deg * var(--wind-intensity)));
  }
}

/* Branch swaying animation */
@keyframes branchSway {
  0%, 100% {
    transform: translateX(-50%) 
      rotate(calc(var(--branch-angle) + var(--wind-direction) * -2deg * var(--wind-intensity)));
  }
  50% {
    transform: translateX(-50%)
      rotate(calc(var(--branch-angle) + var(--wind-direction) * 2deg * var(--wind-intensity)));
  }
}
